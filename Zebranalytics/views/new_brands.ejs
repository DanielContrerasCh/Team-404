<%- include('includes/head.ejs', {permisos: permisos}) %>
  <%- include('includes/header.ejs') %>

    <div class="container mt-5">
      <div class="row justify-content-center align-items-center">
        <div class="col-md-6">
          <% if (typeof error !== 'undefined' && error) { %>
            <div class="alert alert-danger" role="alert">
              <%= error %>
            </div>
          <% } %>
          <!-- Forma para recibir info de marca -->
          <form class="brand-form card text-center p-4" action="/brands/new" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <h1 class="display-4 fs-1 mb-3">Registra una nueva marca</h1>
            <label class="mt-4 mb-2 text-center" for="brandname">Nombre de la marca</label>
            <input class="form-control" type="text" id="brandname" name="brandname" required>
            <label class="mt-4 mb-2"> Imagen de la marca</label>
            <input class="form-control" type="file" id="brandimagelink" name="brandimagelink" accept="image/*" required
            onchange="validateForm()">
            <button type="submit" class="btn btn-primary mt-3" id="submitButton">Enviar</button>
          </form>


          </form>

        </div>
      </div>
    </div>
    </div>
    </div>



    </body>
    <%- include('includes/sidebar.ejs') %>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      <script>
        function validateForm() {
            var fileInput = document.getElementById('brandimagelink');
            var filePath = fileInput.value;
            // Verificar si el archivo seleccionado es una imagen
            if (filePath) {
              var allowedExtensions = /(\.jpg|\.jpeg|\.png|\.webp)$/i;
              if (!allowedExtensions.exec(filePath)) {
                alert('El archivo ingresado no es una imagen v√°lida. Por favor, selecciona un archivo con formato PNG, JPG, JPEG o WEBP.');
                document.getElementById("submitButton").disabled = true;
                return false;
              }
            }
            document.getElementById("submitButton").disabled = false;
            return true;
          }
</script>  

      </html>